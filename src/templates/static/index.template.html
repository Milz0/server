{%TEMPLATE->struct/head%}
{%TEMPLATE->struct/menu%}

{{IF ![[login.isLoggedin()]]}}
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-5">
      <h2 class="mb-3">Login</h2>

      {%TEMPLATE->struct/messages%}

      <div class="card {{IF [[toggledarkmode]] > 0}}bg-dark text-light border-secondary{{ENDIF}}">
        <div class="card-body">
          <form action="login.php" method="post">
            <input type="hidden" name="fw" value="[[fw]]">

            <div class="mb-3">
              <label for="inputUsername" class="form-label">Username</label>
              <input name="username" type="text" class="form-control" id="inputUsername" placeholder="Username" autocomplete="username" autofocus>
            </div>

            <div class="mb-3">
              <label for="inputPassword" class="form-label">Password</label>
              <input name="password" type="password" class="form-control" id="inputPassword" placeholder="Password" autocomplete="current-password">
            </div>

            {{IF [[Util::isYubikeyEnabled()]]}}
              <div class="mb-3">
                <label for="inputOTP" class="form-label">Yubikey OTP (if enabled)</label>
                <input name="otp" type="password" class="form-control" id="inputOTP" placeholder="OTP" autocomplete="one-time-code">
              </div>
            {{ENDIF}}

            <div class="d-flex flex-wrap align-items-center gap-3">
              <button type="submit" class="btn btn-success">Sign in</button>
              <a href="forgot.php">Forgot password</a>
            </div>
          </form>
        </div>
      </div>

      <div class="alert alert-info mt-3 mb-0">
        This is a private closed system. If you need access you need to contact an admin of this page and ask for creating an account.
      </div>
    </div>
  </div>
{{ELSE}}
  {%TEMPLATE->struct/messages%}

  <div class="alert alert-success">
    Hi [[user.getUsername()]], welcome back!
  </div>

  <div class="alert {{IF [[toggledarkmode]] > 0}}alert-primary{{ELSE}}alert-info{{ENDIF}}">
    <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-2">
      <div>
        [[$APP_NAME]] Sourcecode is available in these Github repositories:
      </div>
      <div class="d-flex flex-wrap gap-2">
        <a class="btn btn-primary" href="https://github.com/hashtopolis/server" target="_blank" rel="noopener">Server</a>
        <a class="btn btn-primary" href="https://github.com/hashtopolis/agent" target="_blank" rel="noopener">Client(s)</a>
      </div>
    </div>

    <hr>

    <div>
      To get more information about how to use [[$APP_NAME]], please visit the
      <a href="https://github.com/hashtopolis/server/wiki" target="_blank" rel="noopener">wiki</a>
      or the
      <a href="https://hashtopolis.org" target="_blank" rel="noopener">Forum</a>.
    </div>
  </div>
{{ENDIF}}

{%TEMPLATE->struct/foot%}