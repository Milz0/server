{%TEMPLATE->struct/head%}
{%TEMPLATE->struct/menu%}

<h2>Cracker Binary '<span class="text-muted">[[binaryType.getTypeName()]]</span>'</h2>

{%TEMPLATE->struct/messages%}

<div class="card">
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th scope="col">Binary ID</th>
          <th scope="col">Version</th>
          <th scope="col">Binary Name</th>
          <th scope="col">Download URL</th>
          <th scope="col" class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        {{FOREACH binary;[[binaries]]}}
          <tr>
            <td>[[binary.getId()]]</td>

            <td>
              <code>[[binary.getVersion()]]</code>
            </td>

            <td>
              [[htmlentities([[binary.getBinaryName()]], ENT_QUOTES, "UTF-8")]]
            </td>

            <td class="text-break">
              [[htmlentities([[binary.getDownloadUrl()]], ENT_QUOTES, "UTF-8")]]
            </td>

            <td class="text-center">
              {{IF [[accessControl.hasPermission([[$DAccessControl::CRACKER_BINARY_ACCESS]])]]}}
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                  <a
                    class="btn btn-sm btn-primary"
                    href="crackers.php?edit=true&id=[[binary.getId()]]"
                    title="Edit"
                  >
                    <i class="fas fa-edit" aria-hidden="true"></i>
                  </a>

                  <form
                    action="crackers.php?id=[[binaryType.getId()]]"
                    method="POST"
                    onsubmit="if (!confirm('Really delete binary [[binary.getVersion()]]?')) return false;"
                    class="m-0"
                  >
                    <input type="hidden" name="action" value="[[$DCrackerBinaryAction::DELETE_BINARY]]">
                    <input type="hidden" name="binaryId" value="[[binary.getId()]]">
                    <input type="hidden" name="csrf" value="[[csrf]]">
                    <button type="submit" class="btn btn-sm btn-danger" title="Delete">
                      <i class="fas fa-trash" aria-hidden="true"></i>
                    </button>
                  </form>
                </div>
              {{ENDIF}}
            </td>
          </tr>
        {{ENDFOREACH}}
      </tbody>
    </table>
  </div>
</div>

{%TEMPLATE->struct/foot%}